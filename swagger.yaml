swagger: '2.0'
info:
  description: |
    ### Конструктор приложений
  version: 0.1.0
  title: ''
  termsOfService: ''
  contact:
    email: ''
  x-logo:
    url: ""
    backgroundColor: "#FFFFFF"
basePath: /api/v4
host: foodexpress.russianit.ru
tags:
  - name: errors
    description: |
      пример типовой ошибки:
      ```
      {
          "id": "the.error.id",
          "message": "no connect oauth provider", // причина
          "request_id": "", // ID запроса
          "status_code": 0 // HTTP status code

      }
  - name: websocket
    description: |
      #### События

      События WebSocket в основном используются для уведомления клиента об изменениях, таких как доставка новых сообщений или уведомления собеседнику о вводе текста.

      ```
      {
        "event": "hello",
        "data": {
          "server_version": "3.6.0.1451.1c38da627ebb4e3635677db6939e9195"
        },
        "broadcast":{
          "omit_users": null,
          "user_id": "ay5sq51sebfh58ktrce5ijtcwy",
          "channel_id": "",

        }
      }
      ```

      Поле `event` указывает тип события,` data` содержит любые данные, относящиеся к событию, а `broadcast` содержит информацию о том, кому было отправлено событие. Например, приведенный выше пример имеет `user_id`, установленный в" ay5sq51sebfh58ktrce5ijtcwy ", что означает, что только пользователь с этим идентификатором получил это событие. Поле `omit_users` может содержать массив идентификаторов пользователей, которые были исключены при получении события.
      Список событий:
      - typing
      - posted
      - hello


      #### WebSocket API

      ```
      {
        "action": "user_typing",
        "seq": 2,
        "data": {
          "channel_id": "nhze199c4j87ped4wannrjdt9c",
        }
      }
      ```

      Это пример запроса `user_typing`, оповещает сервер о том, что подключенный клиент начал печатать в беседе. Поле `action` указывает, что запрашивается, и выполняет аналогичную функцию, как роут в HTTP API.
      «seq» или порядковый номер задается клиентом и при каждом использовании должны быть увеличены. Он используется для различения ответов на запросы, поступающие с WebSocket. Например, стандартный ответ на вышеуказанный запрос:
      ```
      {
        "status": "OK",
        "seq_reply": 2
      }
      ```

      Уведомление `seq_reply` равно 2, соответствуя` seq` исходного запроса. Используя это, клиент может различать, к какому запросу относится ответ.


      В случае ошибки ответ будет следующим:

      ```
      {
        "status": "FAIL",
        "seq_reply": 2,
        "error": {
          "id": "some.error.id.here",
          "message": "Some error message here"
        }
      }
      ```
  - name: auth
    description: |
      #### Авторизация.
  - name: messages
    description: |
      #### Сообщения.
  - name: files
    description: |
      #### Работа с файлами.
  - name: categories
    description: |
      #### Категории.
  - name: cart
    description: |
      #### Корзина.
  - name: products
    description: |
      #### Товары.
  - name: promos
    description: |
      #### Акции.
  - name: order
    description: |
      #### Заказы.
  - name: bonus
    description: |
      #### Бонусы.
x-tagGroups:
  - name: Базовые определения
    tags:
      - errors
      - websocket
  - name: Авторизация и чат
    tags:
      - auth
      - messages
      - files
  - name: Каталог
    tags:
      - categories
      - products
      - promos
  - name: Заказ
    tags:
      - cart
      - order
      - bonus
schemes:
  - http
consumes:
  - application/json
produces:
  - application/json
responses:
  'Forbidden':
    description: Доступ запрещён
    schema:
      $ref: '#/definitions/AppError'
  'Unauthorized':
    description: Access-Token не предоставлен
    schema:
      $ref: '#/definitions/AppError'
  'BadRequest':
    description: Недопустимые или отсутствующие параметры в URL-адресе или теле запроса
    schema:
      $ref: '#/definitions/AppError'
  'NotFound':
    description: Страница не найдена
    schema:
      $ref: '#/definitions/AppError'
  'TooLarge':
    description: Содержание слишком большое
    schema:
      $ref: '#/definitions/AppError'
  'NotImplemented':
    description: Функция отключена
    schema:
      $ref: '#/definitions/AppError'
  'InternalServerError':
    description: Что-то пошло не так с сервером
    schema:
      $ref: '#/definitions/AppError'
paths:
  '/order/{user_id}':
    post:
      tags:
        - order
      summary: Формирование заказа
      description: |
        ####
        ```
        ```
      parameters:
        - in: path
          name: "{user_id}"
          description: ид пользователя
          required: true
          type: string
        - in: body
          schema:
            $ref: '#/definitions/OrderBody'
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/CheckoutOrderResponse'

  '/order/{order_id}':
    get:
      tags:
        - order
      summary: Просмотр заказа
      description: |
        ####
        ```
        ```
      parameters:
        - in: path
          name: "{order_id}"
          description: ид заказа
          required: true
          type: int

  '/order/{user_id}/history':
    get:
      tags:
        - order
      summary: История заказов у пользователя
      description: |
        ####
        ```
        ```
      parameters:
        - in: path
          name: "{user_id}"
          description: ид пользователя
          required: true
          type: string
        - in: query
          name: page
          description: номер страницы
        - in: query
          name: per_page
          description: количество элементов на странице
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/OrderHistory'

  '/cart/{user_id}':
    get:
      tags:
        - cart
      summary: Просмотр корзины пользователя
      description: |
          ####
          ```
          ```
      parameters:
        - in: path
          name: "{user_id}"
          description: ид пользователя
          required: true
          type: string
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/Cart'
    post:
      tags:
        - cart
      summary: Добавление товаров в корзину
      description: |
          ####
          ```
          ```
      parameters:
        - in: path
          name: "{user_id}"
          description: ид пользователя
          required: true
          type: string
        - in: body
          schema:
            $ref: '#/definitions/CartItems'
  '/users/reg':
    post:
      tags:
        - auth
      summary:
      description: Регистрация пользователя по номеру телефона
      parameters:
        - name: nickname
          in: path
          description: Имя пользователя для отображения
          required: true
          type: string
        - name: phone
          in: path
          description: Телефон, формат (7XXXXXXXXX)
          required: true
          type: string
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/RegToken'
        '400':
            $ref: '#/responses/BadRequest'
        '401':
            $ref: '#/responses/Unauthorized'
        '403':
            $ref: '#/responses/Forbidden'
        '404':
            $ref: '#/responses/NotFound'
  '/users/send':
    post:
      tags:
        - auth
      summary:
      description: Отправка СМС сообщения с кодом доступа
      parameters:
        - name: token
          in: path
          description: Токен досутпа
          required: true
          type: string
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/StatusOK'
        '400':
            $ref: '#/responses/BadRequest'
        '401':
            $ref: '#/responses/Unauthorized'
        '403':
            $ref: '#/responses/Forbidden'
        '404':
            $ref: '#/responses/NotFound'
  '/users/verify':
    post:
      tags:
        - auth
      summary:
      description: Подтверждения регистрации
      parameters:
      - name: token
        in: path
        description: Токен доступа
        required: true
        type: string
      - name: code
        in: path
        description: Код подверждения
        required: true
        type: string
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/UserReg'
        '400':
            $ref: '#/responses/BadRequest'
        '401':
            $ref: '#/responses/Unauthorized'
        '403':
            $ref: '#/responses/Forbidden'
        '404':
            $ref: '#/responses/NotFound'
  '/tokens/{token}':
    get:
      tags:
        - auth
      summary:
      description: Получить информации по токену доступа
      parameters:
        - name: token
          in: path
          description: Токена
          required: true
          type: string
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/GetToken'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
  '/attach_device':
    post:
      tags:
        - auth
      summary:
      description: Привязка токена устройства
      parameters:
        - name: device_id
          in: path
          description: Токен устройства
          required: true
          type: string
      responses:
        '200':
          description: Успешно
          schema:
            $ref: '#/definitions/StatusOK'
        '400':
            $ref: '#/responses/BadRequest'
        '401':
            $ref: '#/responses/Unauthorized'
        '403':
            $ref: '#/responses/Forbidden'
        '404':
            $ref: '#/responses/NotFound'

  '/messages':
      get:
            tags:
              - messages
            summary: Возвращает список сообщений
            description: |
              Возвращет список сообщений. Параметры `since`, `before` и `after` нельзя использовать совместно.
            parameters:

              - name: page
                in: query
                description: Порядковый номер страницы
                default: "0"
                type: string
              - name: per_page
                in: query
                description: Количество записей на странице
                default: "60"
                type: string
              - name: since
                in: query
                description: Ненулевое значение в миллисекундах (unix), чтобы выбрать сообщения, созданные после этого времени
                type: integer
              - name: before
                in: query
                description: Идентификатор сообщения для выбора сообщений, которые были до него
                type: string
              - name: after
                in: query
                description: Идентификатор сообщения для выбора сообщений, которые были после
                type: string
            responses:
              '200':
                description: Список сообщений
                schema:
                  $ref: "#/definitions/MessageList"
              '400':
                $ref: '#/responses/BadRequest'
              '401':
                $ref: '#/responses/Unauthorized'
              '403':
                $ref: '#/responses/Forbidden'
      post:
          tags:
            - messages
          summary: Создание сообщения
          description: ''

          parameters:
            - in: body
              name: post
              description: json
              required: true
              schema:
                type: object
                required:

                  - message
                properties:

                  message:
                    type: string
                    description: Текст сообщения, поддерживает markdown
                  local_id:
                    type: string
                    description: Дополнительный идентификатор для мобильного клиента
                  file_ids:
                    type: array
                    description: Массив идентификаторов прикрепленных файлов
                    items:
                      type: string

          responses:
            '201':
              description: Успешное создание сообщения
              schema:
                $ref: '#/definitions/Message'
            '400':
              $ref: '#/responses/BadRequest'
            '401':
              $ref: '#/responses/Unauthorized'
            '403':
              $ref: '#/responses/Forbidden'
  '/messages/{message_id}':
      get:
        tags:
          - messages
        summary: Получить сообщение
        description: |
          Получить одно сообщение
        parameters:
          - name: message_id
            in: path
            description: Идентификатор сообщения
            required: true
            type: string
        responses:
          '200':
            description: Возвращает сообщение
            schema:
              $ref: "#/definitions/Message"
          '400':
            $ref: '#/responses/BadRequest'
          '401':
            $ref: '#/responses/Unauthorized'
          '403':
            $ref: '#/responses/Forbidden'

  /files:
    post:
      tags:
        - files
      summary: Загрузка файла
      description: |

      consumes: ["multipart/form-data"]
      parameters:
        - name: files
          in: formData
          description: Данные файлов
          required: true
          type: file
        - name: channel_id
          in: formData
          description: Ид канала
          required: true
          type: string
        - name: local_ids
          in: formData
          description: Локальный идентифкатор файлов
          required: false
          allowEmptyValue: true
          type: string
      responses:
        '200':
          description: Возврашает сопостовление локального идентификатора и ид в базе данных
          schema:
            type: object
            properties:
              file_infos:
                description:
                type: array
                items:
                  $ref: '#/definitions/FileInfo'
              local_ids:
                description:
                type: array
                items:
                  type: string
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '413':
          $ref: '#/responses/TooLarge'
        '501':
          $ref: '#/responses/NotImplemented'
  '/files/{file_id}':
    get:
      tags:
        - files
      summary: Получить файл
      description: |
      parameters:
        - name: file_id
          in: path
          description: Идентификатор файла (local_id, id)
          required: true
          type: string
      responses:
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
        '501':
          $ref: '#/responses/NotImplemented'
  '/files/{file_id}/thumbnail':
    get:
      tags:
        - files
      summary: Картинка предпросмотра
      description: |
      parameters:
        - name: file_id
          in: path
          description: Идентификатор файла (local_id, id)
          required: true
          type: string
      responses:
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
        '501':
          $ref: '#/responses/NotImplemented'
  '/files/{file_id}/info':
    get:
      tags:
        - files
      summary: Метаданные файла
      description: |

      parameters:
        - name: file_id
          in: path
          description: Идентификатор файла (local_id, id)
          required: true
          type: string
      responses:
        '200':
          description: Метаданные
          schema:
            $ref: "#/definitions/FileInfo"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
        '501':
          $ref: '#/responses/NotImplemented'

##################################################################################################################




  '/categories':
      get:
        tags:
          - categories
        summary: Список категорий
        description: |
            ###
        parameters:
          - in: query
            name: client_id
            type: string
            description: ид организации
        responses:
          200:
            description: Возвращает список категорий
            schema:
              $ref: '#/definitions/Categories'
          400:
            $ref: '#/responses/BadRequest'
          401:
            $ref: '#/responses/Unauthorized'
          403:
            $ref: '#/responses/Forbidden'
          404:
            $ref: '#/responses/NotFound'
          501:
            $ref: '#/responses/NotImplemented'
      post:
        tags:
          - categories
        summary: Создание категории
        description: |
            ###
        parameters:
          - in: body
            name: post
            description: json
            schema:
              $ref: '#/definitions/Category'
        responses:
          200:
            description: Возвращает информацию о созданной категории
            schema:
              $ref: '#/definitions/Category'
          400:
            $ref: '#/responses/BadRequest'
          401:
            $ref: '#/responses/Unauthorized'
          403:
            $ref: '#/responses/Forbidden'
          404:
            $ref: '#/responses/NotFound'
          501:
            $ref: '#/responses/NotImplemented'
  '/categories/{category_id}/path':
    get:
      tags:
        - categories
      summary: Информация о категории и его потомках
      description: |
          ###
      parameters:
        - in: path
          name: "{category_id}"
          type: integer
          description: идентификатор организации
          required: true
      responses:
        200:
          description: Успешно
          schema:
            $ref: "#/definitions/Category"
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        403:
          $ref: '#/responses/Forbidden'
        501:
          $ref: '#/responses/NotImplemented'
  '/categories/{category_id}':
    get:
      tags:
        - categories
      summary: Информация о категории
      description: |
          ###
      parameters:
        - in: path
          name: "{category_id}"
          type: integer
          description: идентификатор категории
          required: true
      responses:
        200:
          description: Успешно
          schema:
            $ref: "#/definitions/Category"
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        403:
          $ref: '#/responses/Forbidden'
        501:
          $ref: '#/responses/NotImplemented'
    delete:
      tags:
        - categories
      summary: Удаление категории
      description: |
          ###
      parameters:
        - in: path
          name: "{category_id}"
          required: true
          description: идентификатор категории
          type: integer
      responses:
        200:
          description: Успешно
          schema:
            $ref: "#/definitions/StatusOK"
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        403:
          $ref: '#/responses/Forbidden'
        501:
          $ref: '#/responses/NotImplemented'

  '/promos/client/{client_id}':
    get:
      tags:
        - promos
      summary: Список акций/новостей
      description: |
        Возвращает список всех акций/новостей у клиента
      parameters:
        - in: query
          name: "{client_id}"
          type: integer
          description: ид клиента
          required: true
        - name: page
          in: query
          description: Порядковый номер страницы
          default: 0
          type: string
        - name: per_page
          in: query
          description: Количество записей на странице
          default: 60
          type: string
      responses:
        '200':
          description: Возвращает список акций/новостей
          schema:
            $ref: "#/definitions/Promos"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
    post:
      tags:
        - promos
      summary: Создание акции/новости
      description: |
      parameters:
        - in: query
          name: "{client_id}"
          description: ид клиента
          type: integer
          required: true
        - in: body
          name: post
          description: json
          schema:
            $ref: "#/definitions/PromosCreate"
      responses:
        '200':
          description: Возвращает информацию о акции/новости
          schema:
            $ref: "#/definitions/Promos"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'

  '/promos/{promo_id}':
    get:
      tags:
        - promos
      summary: Информация о акции/новости
      description: |
        Возвращает информацию о акции/новости по id
      parameters:
        - in: query
          name: "{promo_id}"
          type: integer
          description: ид акции/новости
          required: true
      responses:
        '200':
          description: Возвращает информацию о акции/новости
          schema:
            $ref: "#/definitions/Promos"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
    delete:
      tags:
        - promos
      summary: Удаление акции/новости
      description: |
      parameters:
        - in: query
          name: "{promo_id}"
          type: integer
          description: ид акции/новости
          required: true

  '/promos/{promo_id}/publish':
    get:
      tags:
        - promos
      summary: Опубликовать акцию/новость
      description: |
        Публикация акции/новости
      parameters:
        - in: query
          name: "{promo_id}"
          type: integer
          description: ид акции/новости
          required: true
      responses:
        '200':
          description: Возвращает информацию о акции/новости
          schema:
            $ref: "#/definitions/Promos"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'

  '/products/{product_id}/publish':
    get:
      tags:
        - products
      summary: Опубликовать товар
      description: |
        Публикация товара
      parameters:
        - in: query
          name: "{product_id}"
          type: integer
          description: ид товара
          required: true
      responses:
        '200':
          description: Возвращает информацию о товаре
          schema:
            $ref: "#/definitions/Promos"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'

  '/files/promos/{promo_id}':
    post:
      tags:
        - promos
      summary: Загрузка медиафайлов акции/новости
      description: |
      consumes: ["multipart/form-data"]
      parameters:
        - in: query
          name: "{promo_id}"
          type: integer
          description: ид акции/новости
          required: true
        - in: formData
          name: files
          description: Данные файлов
          required: true
          type: file
      responses:
        '200':
          description: Возврашает информацию о загруженном файле
          schema:
            type: object
            properties:
              file_infos:
                description:
                type: array
                items:
                  $ref: '#/definitions/FileInfo'
              local_ids:
                description:
                type: array
                items:
                  type: string
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '413':
          $ref: '#/responses/TooLarge'
        '501':
          $ref: '#/responses/NotImplemented'

  '/products':
    post:
      tags:
        - products
      summary: Создание продукции/товара
      description: |
      parameters:
        - in: query
          name: "{product_id}"
          type: integer
          description: ид продукции
          required: true
        - in: body
          name: post
          description: json
          schema:
            type: object
            required:
              - ClientId
              - Name
              - Preview
              - Description
              - CategoryId
            properties:
              ClientId:
                type: int
                description: ид организации
              Name:
                type: string
                description: наименование товара/продукции
              Description:
                type: string
                description: описание товара
              CategoryId:
                type: integer
                description: ид категории

  '/files/products/{product_id}':
    post:
      tags:
        - products
      summary: Загрузка медиафайлов продукции/товаров
      description: |
      consumes: ["multipart/form-data"]
      parameters:
        - in: query
          name: "{product_id}"
          type: integer
          description: ид продукции
          required: true
        - in: formData
          name: files
          description: Данные файлов
          required: true
          type: file
      responses:
        '200':
          description: Возврашает информацию о загруженном файле
          schema:
            type: object
            properties:
              file_infos:
                description:
                type: array
                items:
                  $ref: '#/definitions/FileInfo'
              local_ids:
                description:
                type: array
                items:
                  type: string
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '413':
          $ref: '#/responses/TooLarge'
        '501':
          $ref: '#/responses/NotImplemented'
  '/products/client/{client_id}':
    get:
      tags:
        - products
      summary: Возвращает список продуктов/товаров у организации
      description: ''
      parameters:
        - in: query
          name: "{client_id}"
          description: идентификатор организации
          required: true
          type: integer
        - name: page
          in: query
          description: Порядковый номер страницы
          default: 0
          type: string
        - name: per_page
          in: query
          description: Количество записей на странице
          default: 60
          type: string
        - name: category_id
          in: query
          description: идентификатор категории
          type: integer
      responses:
        '200':
          description: Возвращает список продуктов/товаров у организации
          schema:
            $ref: "#/definitions/Products"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  '/products/{product_id}':
    get:
      tags:
        - products
      summary: Возвращает информацию о продукции/товаре
      description: ''
      parameters:
        - name: "{product_id}"
          in: query
          description: идентификатор продукции/товара
          required: true
          type: integer
      responses:
        '200':
          description: Возвращает информацию о продукции/товаре
          schema:
            $ref: "#/definitions/Product"
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
    delete:
      tags:
        - products
      summary: Удаление продукции/товара
      description: ''
      parameters:
        - name: "{product_id}"
          in: query
          description: идентификатор продукции/товара
          required: true
          type: integer
definitions:
  Message:
    type: object
    properties:
      id:
        type: string
      create_at:
        type: integer
      update_at:
        type: integer
      delete_at:
        type: integer
      user_id:
        type: string
      channel_id:
        type: string
      original_id:
        type: string
      local_id:
        type: string
      message:
        type: string
      type:
        type: string
      props:
        type: object

      file_ids:
        type: array
        items:
          type: string
  MessageList:
    type: object
    properties:
      order:
        type: array
        items:
            type: string
        example: ["message_id1", "message_id12"]
      messages:
        type: object
        additionalProperties:
          $ref: '#/definitions/Message'
  AppError:
    type: object
    properties:
      status_code:
        type: integer
      id:
        type: string
      message:
        type: string
      request_id:
        type: string
  StatusOK:
    type: object
    properties:
      status:
        description: Будет содержать «ok», если запрос был успешным
        type: string
  FileInfo:
    type: object
    properties:
      id:
        description: Идентификатор
        type: string
      local_id:
        description: Локальный идентификатор
        type: string
      user_id:
        description: Ид пользователя кто прикрепил файл
        type: string
      message_id:
        description: Идентификатор сообщения
        type: string
      create_at:
        type: integer
      update_at:
        type: integer
      delete_at:
        type: integer
      name:
        description: Название файла
        type: string
      extension:
        description: Расширение
        type: string
      size:
        description: Размер
        type: integer
      mime_type:
        description: MIME
        type: string
      width:
        description: Ширина (для изображений)
        type: integer
      height:
        description: Высота (для изображений)
        type: integer
  RegToken:
    type: object
    properties:
      stage_token:
        type: string
      status:
        type: string
  UserReg:
    type: object
    properties:
      id:
        type: string
      token:
        type: string
      user_id:
        type: string
      channel_id:
        type: string
      channel_name:
        type: string
      description:
        type: string
      is_active:
        type: boolean
  GetToken:
    type: object
    properties:
      id:
        type: string
      user_id:
        type: string
      description:
        type: string
      is_active:
        type: boolean

  ProductList:
    type: object
    properties:
      order:
        type: array
        items:
          type: string
      products:
        type: array
        items:
          $ref: '#/definitions/Product'
  Category:
    type: object
    properties:
      id:
        type: string
        description: ид категории
      client_id:
        type: string
        description: ид организации
      name:
        type: string
        description: наименование категории
      parent_id:
        type: integer
        description: родетельская категория
        nullable: true
      create_at:
        type: integer
        description: дата создания
      update_at:
        type: integer
        description: дата обновления
      lft:
        type: integer
        description: left
      rgt:
        type: integer
        description: right
      count_children:
        type: integer
        description: кол-во потомков
      children:
        type: array
        description: потомки
        items:
          $ref: '#/definitions/Category'
      destination_id:
        type: string
        description: destination id
      products:
        $ref: '#/definitions/ProductList'
  Product:
    type: object
    properties:
      id:
        type: string
        description: идентификатор продукции
      client_id:
        type: string
        description: идентификатор организации
      name:
        type: string
        description: наименование товара
      preview:
        type: string
        description: превью-описание товара
      description:
        type: string
        description: полное описание товара
      price:
        type: string
        description: цена
      value:
        type: string
        description: value
      discount_limit:
        type: string
        description: ограничение по скидке
      cashback:
        type: integer
        description: кэшбэк
      status:
        type: boolean
        description: статус (на модерации/опубликовано)
      create_at:
        type: int
        description: дата создания
      update_at:
        type: int
        description: дата обновления
      delete_at:
        type: int
        description: дата удаления
      category_id:
        type: string
        description: идентификатор категории
      file_ids:
        type: array
        items:
          type: string
      image:
        type: object
        schema:
          $ref: '#/definitions/FileInfo'
      more_image:
        type: array
        items:
          $ref: '#/definitions/FileInfo'
      category:
        type: object
        schema:
          $ref: '#/definitions/Category'
      matadata:
        type: object
        schema:
          $ref: '#/definitions/ProductMetadata'
  ProductMetadata:
    type: object
    properties:
      files:
        type: array
        items:
          $ref: '#/definitions/FileInfo'
      images:
        type: array
        items:
          $ref: '#/definitions/PostImage'
  PostImage:
    type: object
    properties:
      with:
        type: integer
        description: ширина
      height:
        type: integer
        description: высота
  Categories:
    type: array
    items:
      $ref: '#/definitions/Category'
  CategoriesByClient:
    type: array
    items:
      $ref: '#/definitions/Category'

  ProductOld:
    type: object
    properties:
      Id:
        type: integer
        description: идентификатор продукции
      ClientId:
        type: integer
        description: идентификатор организации
      Name:
        type: string
        description: наименование товара
      Preview:
        type: string
        description: превью-описание товара
      Description:
        type: string
        description: полное описание товара
      Price:
        type: string
        description: цена
      Value:
        type: string
        description: кол-во гр./шт. ?
      DiscountLimit:
        type: integer
        description: ограничение по скидке
      Cashback:
        type: integer
        description: кэшбэк
      Status:
        type: boolean
        description: статус (на модерации/опубликовано)
      CreatedAt:
        type: int
        description: дата создания
      UpdatedAt:
        type: int
        description: дата обновления
      DeletedAt:
        type: int
        description: дата удаления
      CategoryId:
        type: int
        description: идентификатор категории
      Category:
        $ref: '#/definitions/Category'
      Media:
        type: array
        items:
          $ref: '#/definitions/Media'
  Products:
    type: array
    items:
      $ref: '#/definitions/Product'

  Media:
    type: object
    properties:
      Id:
        type: integer
      FileId:
        type: string

  Promos:
    type: object
    properties:
      Id:
        type: integer
        description: ид акции/товара
      ClientId:
        type: integer
        description: ид организации
      Name:
        type: string
        description: наименование акции/товара
      Preview:
        type: string
        description: превью
      Description:
        type: string
        description: полное описание
      ProductId:
        type: int
        description: ид продукции
      Push:
        type: boolean
        description: пуш уведомление
      Status:
        type: boolean
        description: статус
      Media:
        type: array
        items:
          $ref: '#/definitions/Media'
  PromosCreate:
    type: object
    properties:
      ClientId:
        type: integer
        description: ид клиента
      Name:
        type: string
        description: заголовок акции/новости
      Preview:
        type: string
        description: превью акции/новости
      Description:
        type: string
        description: описание акции/новости
      ProductId:
        type: integer
        description: ид продукции (необязательно)
      Push:
        type: boolean
        description: пуш уведомление
      Status:
        type: boolean
        description: статус (на модерации/опубликовано)

  UpdateCartItemBody:
    type: object
    properties:
      Quantity:
        type: integer
        description: кол-во товара

  UpdateCartItemResponse:
    type: object
    properties:
      Id:
        type: string
        description: ид товара в корзине
      Quantity:
        type: int
        description: кол-во товара в корзине
  CreateCartItemResponse:
    type: object
    properties:
      Id:
        type: string
        description: ид товара в корзине

  Cart:
    type: object
    properties:
      Items:
        type: array
        items:
          $ref: '#/definitions/Product'
        description: основные товары
      ExtraItems:
        type: array
        items:
          $ref: '#/definitions/Product'
        description: дополнительные товары
      TotalPrice:
        type: integer
        description: цена товаров в корзине
  CartItem:
    type: object
    properties:
      product_id:
        type: string
      quantity:
        type: int
  CartItems:
    type: array
    items:
      $ref: '#/definitions/CartItem'
  Client:
    type: object
    properties:
      id:
        type: int
        description: ид
      name:
        type: string
        description: наименование клиента
      phone:
        type: string
        description: телефон
      details:
        type: string
        description: реквизиты
      notice:
        type: string
        description: примечание
      status:
        type: int
        description: 1
      date_in:
        type: int
        description: 1
      date_out:
        type: int
        description: 1
      discount_limit:
        type: int
        description: 1
  Office:
    type: object
    properties:
      Id:
        type: int
  CheckoutOrderResponse:
    type: object
    properties:
      OrderId:
        type: string
      FormUrl:
        type: string
      ErrorCode:
        type: string
      ErrorMessage:
        type: string
  OrderHistory:
    type: object
    properties:
      id:
        type: int
        description: ид
      status:
        type: string
        description: статус заказа
      value:
        type: int
        description: общая сумма заказа
      created_at:
        type: int
        description: дата создания
      positions:
        type: array
        description: позиции
        items:
          $ref: '#/definitions/Position'
  Position:
    type: object
    properties:
      id:
        type: string
        description: ид
      name:
        type: string
        description: наименование позиции
      price:
        type: int
        description: цена на момент оформления
      quantity:
        type: int
        description: количество
      user_id:
        type: string
        description: ид пользователя
      product_id:
        type: int
        description: ид продукции в каталоге
      order_id:
        type: int
        description: ид заказа
  OrderBody:
    type: object
    properties:
      address:
        type: string
        description: адрес доставки
      phone:
        type: string
        description: контактный номер телефона
      comment:
        type: string
        description: комментарий к заказу
      bonus:
        type: int
        description: количество оплаты бонусами
      delivery_type:
        type: string
        description: тип доставки
      delivery_date:
        type: int
        description: дата доставки в unix формате

externalDocs:

